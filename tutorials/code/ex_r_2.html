<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>TUTORIAL SERIES: GETTING DATA INTO R: GETTING DATA FROM A TEXT FILE</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h2>TUTORIAL SERIES: GETTING DATA INTO R: GETTING DATA FROM A TEXT FILE</h2>

<h3>STEP 1: SET DIRECTORY &amp; GET/LOAD LIBRARIES</h3>

<ul>
<li>Check your working directory and load necessary libraries. getwd() will tell
you what the working directory is, and with setwd() you can change it to the directory
you want to be in (the one you want to work from)</li>
</ul>

<pre><code class="r">getwd()
setwd(&quot;c:/users/user/documents/path_to_my_folder/&quot;)
</code></pre>

<ul>
<li><p>Note: you can set the default working directory in your &#39;Rprofile.site&#39; file, which
is likely in the &#39;etc&#39; directory of your R installation (&ldquo;c:/Program
Files/R/R-3.4.0/etc/Rprofile.site&rdquo; on my computer.) It may be write protected,
start editor with admin access or change user access on your computer.</p></li>
<li><p>Next: load libraries necessary to your task. For this tutorial we want: dplyr,
tidyr, ggplot2, lubridate, and tibble</p></li>
<li><p>R will tell you if they are installed when you load the library</p></li>
<li><p>Below you can see how to install them, but first select where you want to get
them from.</p></li>
<li><p>Note: you can select a mirror from the auto drop down menu when you load the package
but sometimes that will freeze up R, for example when your firewall blocks the
connection. I set the mirror in the Rprofile.site file. I use a mirror from
Vancouver, but you can select any mirror (some are secure protocol)</p></li>
</ul>

<pre><code class="r">options(repos= c(CRAN=&quot;http://cran.stat.sfu.ca/&quot;))
</code></pre>

<ul>
<li>NEXT, install packages</li>
<li>Install.packages() has two arguments pkgs and lib, what you want to install
and where you want to install it, respectively</li>
<li><p>If installing many packages you can use a list or column from a data frame</p></li>
<li><p>NOTE: your libraries should go to directories on your .libPaths() list. .libPaths() on it&#39;s own
gives libraries on your path, with arguments it adds them. Here I add a path
to .libPath as an example. To install to default library don&#39;t specify lib argument.</p></li>
</ul>

<pre><code class="r">## get libraries
.libPaths()
</code></pre>

<pre><code>## [1] &quot;C:/emacs/R/win-library/3.4&quot;         &quot;c:/Program Files/R/R-3.4.0/library&quot; &quot;C:/emacs/R/win-library/3.2&quot;         &quot;c:/emacs/R/win-library/3.4&quot;
</code></pre>

<pre><code class="r">## add library
.libPaths( c( .libPaths(), &quot;c:/emacs/R/win-library/3.4&quot;) )
</code></pre>

<pre><code class="r">## install multiple packages to specified library
pkgs &lt;- c(&quot;tibble&quot;, &quot;tidyr&quot;, &quot;dplyr&quot;, &quot;ggplot2&quot;,&quot;lubridate&quot;)
lib &lt;- &quot;c:/emacs/R/win-library/3.4/&quot;
install.packages(pkgs = pkgs, lib = lib)
</code></pre>

<ul>
<li><p>NOTE: we&#39;ve set arguments to variable with the same name but could have put
argument values in quotes as argument definitions or
changed names of variables holding argument values</p></li>
<li><p>NEXT: load libraries for this session &ldquo;&rdquo; don&#39;t matter for this function</p></li>
</ul>

<pre><code class="r">## we load some libraries later to show another way to do it
library(&quot;dplyr&quot;)
library(tidyr)
library(ggplot2)
</code></pre>

<h3>STEP TWO: DOWNLOAD THE DATA</h3>

<ul>
<li><p>We get the data from our source, in this case an URL on a repo called stat lab <a href="http://lib.stat.cmu.edu/datasets/">http://lib.stat.cmu.edu/datasets/</a></p></li>
<li><p>We will download the wind data, which isn&#39;t compressed.</p></li>
<li><p>NOTE: If your data is compressed, download it, scan it, unzip it, separate (if it&#39;s a tarball), then jump ahead to STEP THREE.</p></li>
<li><p>NOTE: download.file() has an url argument and, among others, a destfile arg. Url is
straightforward, destfile takes where you want the file, what it will be
called, and its filetype, all in one go</p></li>
<li><p>NEXT: give each file its own Url object, to record the urls when we save our
namespace objects. Include a date object as data repos can change over time.</p></li>
</ul>

<pre><code class="r">## download.file(), you might need method = &quot;curl&quot; if you have a mac
Url_1 &lt;- &quot;http://lib.stat.cmu.edu/datasets/wind.desc&quot;
Url_2 &lt;- &quot;http://lib.stat.cmu.edu/datasets/wind.data&quot;

## our data repo has description file and a data file (that&#39;s only 2 files = great!)
download.file(url= Url_1, destfile = &quot;wind.desc.txt&quot;)
download.file(url=Url_2, destfile = &quot;wind.data.txt&quot;)

## get the date
date_downloaded &lt;- lubridate::today()
</code></pre>

<ul>
<li>NOTE: lubridate with double colon operator loads lubridate library (which we
didn&#39;t load earlier) for this one instance. library(lubridate) would load for
session. We didn&#39;t put the path because we set our working directory to the
directory we&#39;re in; however, we could have put &ldquo;data/wind.data.txt&rdquo; and added a new directory.</li>
</ul>

<pre><code class="r">## here you can list files or objects in working directory
list.files()
## objects
ls()
</code></pre>

<ul>
<li>NOTE: easy to do the same with dir on a shell, or by refreshing your text editor</li>
</ul>

<h3>STEP THREE: LOAD  DATA INTO R</h3>

<ul>
<li>We read the data description and look at the data in our text editor.</li>
<li>First 5 lines looks like this (R inserted its own headers)</li>
</ul>

<pre><code>##   V1 V2 V3    V4    V5    V6    V7    V8   V9   V10   V11   V12   V13   V14   V15
## 1 61  1  1 15.04 14.96 13.17  9.29 13.96 9.87 13.67 10.25 10.83 12.58 18.50 15.04
## 2 61  1  2 14.71 16.88 10.83  6.50 12.62 7.67 11.50 10.04  9.79  9.67 17.54 13.83
## 3 61  1  3 18.50 16.88 12.33 10.13 11.17 6.17 11.25  8.04  8.50  7.67 12.75 12.71
## 4 61  1  4 10.58  6.63 11.75  4.58  4.54 2.88  8.63  1.79  5.83  5.88  5.46 10.88
## 5 61  1  5 13.33 13.25 11.42  6.17 10.71 8.21 11.92  6.54 10.92 10.34 12.92 11.83
</code></pre>

<ul>
<li><p>NOTE: data has one variable, wind speed in knots, collected every day at 12 different weather stations. There are no headers in the data file, but they are listed in the description (desc) file. Also, delimiters are spaces. We can put the headers (names of variables at head of columns) into first line of file manually with our text editor. Use an extra space between header text just to be sure.</p></li>
<li><p>Now it looks like this:</p></li>
</ul>

<pre><code>##   Year month day   RPT   VAL   ROS   KIL   SHA  BIR   DUB   CLA   MUL   CLO   BEL   MAL
## 1   61     1   1 15.04 14.96 13.17  9.29 13.96 9.87 13.67 10.25 10.83 12.58 18.50 15.04
## 2   61     1   2 14.71 16.88 10.83  6.50 12.62 7.67 11.50 10.04  9.79  9.67 17.54 13.83
## 3   61     1   3 18.50 16.88 12.33 10.13 11.17 6.17 11.25  8.04  8.50  7.67 12.75 12.71
## 4   61     1   4 10.58  6.63 11.75  4.58  4.54 2.88  8.63  1.79  5.83  5.88  5.46 10.88
## 5   61     1   5 13.33 13.25 11.42  6.17 10.71 8.21 11.92  6.54 10.92 10.34 12.92 11.83
</code></pre>

<ul>
<li><p>NOTE: the wind speed variable is grouped by station, but each station is given
a column. This doesn&#39;t satisfy &#39;tidy data&#39;  criteria. We will have to tidy
this up later.</p></li>
<li><p>NEXT: read data into R using read.table() Lots of arguments for read.table(),
we can read about them if we want with ?read.table() in the console.</p></li>
<li><p>We care about three args here, file, header, and sep</p></li>
<li><p>Default delimiter in R is spaces, but I put here sep = &ldquo;&rdquo; (note: not sep = &ldquo; &rdquo;), this way R knows one or more spaces constitutes a delimiter.</p></li>
</ul>

<pre><code class="r">wind &lt;- read.table(file = &quot;wind.data.txt&quot;, header = TRUE, sep = &quot;&quot;)
</code></pre>

<ul>
<li>lots of other ways to load data into R, we will explore some others in future tutorials</li>
</ul>

<h3>STEP FOUR: CLEAN THE DATA</h3>

<ul>
<li>Our data isn&#39;t ready to be tidied yet, dates are in separate columns and year has only two digits</li>
<li>We also want to look at data types in, and dimensions of, our  data frame</li>
</ul>

<pre><code class="r">##  look at dimensions and preview data
nrow(wind)
</code></pre>

<pre><code>## [1] 6574
</code></pre>

<pre><code class="r">ncol(wind)
</code></pre>

<pre><code>## [1] 15
</code></pre>

<pre><code class="r">dim(wind)
</code></pre>

<pre><code>## [1] 6574   15
</code></pre>

<pre><code class="r">head(wind, 3)
</code></pre>

<pre><code>##   Year month day   RPT   VAL   ROS   KIL   SHA  BIR   DUB   CLA   MUL   CLO   BEL   MAL
## 1   61     1   1 15.04 14.96 13.17  9.29 13.96 9.87 13.67 10.25 10.83 12.58 18.50 15.04
## 2   61     1   2 14.71 16.88 10.83  6.50 12.62 7.67 11.50 10.04  9.79  9.67 17.54 13.83
## 3   61     1   3 18.50 16.88 12.33 10.13 11.17 6.17 11.25  8.04  8.50  7.67 12.75 12.71
</code></pre>

<pre><code class="r">tail(wind,3)
</code></pre>

<pre><code>##      Year month day   RPT   VAL   ROS  KIL   SHA   BIR   DUB   CLA   MUL   CLO   BEL   MAL
## 6572   78    12  29 14.00 10.29 14.42 8.71  9.71 10.54 19.17 12.46 14.50 16.42 18.88 29.58
## 6573   78    12  30 18.50 14.04 21.29 9.13 12.75  9.71 18.08 12.87 12.46 12.12 14.67 28.79
## 6574   78    12  31 20.33 17.41 27.29 9.59 12.08 10.13 19.25 11.63 11.58 11.38 12.08 22.08
</code></pre>

<ul>
<li>NOTE: dim tells us what nrow() and ncol() do, but these are still handy
functions. head() and tail() give a preview with args for number of rows
displayed. We can see the years are all within the 20th century.</li>
</ul>

<pre><code class="r">## try structure (str())
str(wind)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    6574 obs. of  15 variables:
##  $ Year : int  61 61 61 61 61 61 61 61 61 61 ...
##  $ month: int  1 1 1 1 1 1 1 1 1 1 ...
##  $ day  : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ RPT  : num  15 14.7 18.5 10.6 13.3 ...
##  $ VAL  : num  14.96 16.88 16.88 6.63 13.25 ...
##  $ ROS  : num  13.2 10.8 12.3 11.8 11.4 ...
##  $ KIL  : num  9.29 6.5 10.13 4.58 6.17 ...
##  $ SHA  : num  13.96 12.62 11.17 4.54 10.71 ...
##  $ BIR  : num  9.87 7.67 6.17 2.88 8.21 4.5 8.33 7.29 6.79 6.54 ...
##  $ DUB  : num  13.67 11.5 11.25 8.63 11.92 ...
##  $ CLA  : num  10.25 10.04 8.04 1.79 6.54 ...
##  $ MUL  : num  10.83 9.79 8.5 5.83 10.92 ...
##  $ CLO  : num  12.58 9.67 7.67 5.88 10.34 ...
##  $ BEL  : num  18.5 17.54 12.75 5.46 12.92 ...
##  $ MAL  : num  15 13.8 12.7 10.9 11.8 ...
</code></pre>

<ul>
<li>str() shows us dimensions, classes, number and names of variables, and gives a
preview all in one go.</li>
</ul>

<pre><code class="r">## try summary(), it&#39;s better with a subset of the data.frame to conserve space
summary(wind[1:4,])
</code></pre>

<pre><code>##       Year        month        day            RPT             VAL             ROS             KIL              SHA              BIR             DUB             CLA              MUL              CLO              BEL             MAL
##  Min.   :61   Min.   :1   Min.   :1.00   Min.   :10.58   Min.   : 6.63   Min.   :10.83   Min.   : 4.580   Min.   : 4.540   Min.   :2.880   Min.   : 8.63   Min.   : 1.790   Min.   : 5.830   Min.   : 5.880   Min.   : 5.46   Min.   :10.88
##  1st Qu.:61   1st Qu.:1   1st Qu.:1.75   1st Qu.:13.68   1st Qu.:12.88   1st Qu.:11.52   1st Qu.: 6.020   1st Qu.: 9.512   1st Qu.:5.348   1st Qu.:10.60   1st Qu.: 6.478   1st Qu.: 7.832   1st Qu.: 7.223   1st Qu.:10.93   1st Qu.:12.25
##  Median :61   Median :1   Median :2.50   Median :14.88   Median :15.92   Median :12.04   Median : 7.895   Median :11.895   Median :6.920   Median :11.38   Median : 9.040   Median : 9.145   Median : 8.670   Median :15.14   Median :13.27
##  Mean   :61   Mean   :1   Mean   :2.50   Mean   :14.71   Mean   :13.84   Mean   :12.02   Mean   : 7.625   Mean   :10.572   Mean   :6.647   Mean   :11.26   Mean   : 7.530   Mean   : 8.738   Mean   : 8.950   Mean   :13.56   Mean   :13.12
##  3rd Qu.:61   3rd Qu.:1   3rd Qu.:3.25   3rd Qu.:15.90   3rd Qu.:16.88   3rd Qu.:12.54   3rd Qu.: 9.500   3rd Qu.:12.955   3rd Qu.:8.220   3rd Qu.:12.04   3rd Qu.:10.092   3rd Qu.:10.050   3rd Qu.:10.398   3rd Qu.:17.78   3rd Qu.:14.13
##  Max.   :61   Max.   :1   Max.   :4.00   Max.   :18.50   Max.   :16.88   Max.   :13.17   Max.   :10.130   Max.   :13.960   Max.   :9.870   Max.   :13.67   Max.   :10.250   Max.   :10.830   Max.   :12.580   Max.   :18.50   Max.   :15.04
</code></pre>

<ul>
<li>summary gives ranges, quartiles, mean, and median of each variable, it&#39;s good.</li>
</ul>

<pre><code class="r">## another way to look at classes of data in data.frame
a &lt;- head(wind, 2)

## use sapply to run an autonomous function of class() on elements of list or frame
sapply(a, function(a) {
class(a)
})
</code></pre>

<pre><code>##      Year     month       day       RPT       VAL       ROS       KIL       SHA       BIR       DUB       CLA       MUL       CLO       BEL       MAL
## &quot;integer&quot; &quot;integer&quot; &quot;integer&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot;
</code></pre>

<ul>
<li><p>sapply splits the frame applies class() on each element then puts the results
into a vector for us, nice.</p></li>
<li><p>NOTE: the classes are okay, r converts numeric to what it needs to use, float,
double, scientific, integer etc&hellip;, that&#39;s fine even though integer is
smaller. We will want, however, one date column in a date class.</p></li>
<li><p>NEXT: before combining columns into a date, let&#39;s convert 2-digit year to 4-digit year</p></li>
<li><p>Easiest to add 1900  to date column, tail() showed us this is a workable fix
in this case</p></li>
</ul>

<pre><code class="r">## I like to use sapply to loop through as it&#39;s good to condition more versatile practices
wind$Year &lt;- sapply(wind$Year, function(a) {
a + 1900
})

## then we have a look, yup, that worked out
head(wind,3)
</code></pre>

<pre><code>##   Year month day   RPT   VAL   ROS   KIL   SHA  BIR   DUB   CLA   MUL   CLO   BEL   MAL
## 1 1961     1   1 15.04 14.96 13.17  9.29 13.96 9.87 13.67 10.25 10.83 12.58 18.50 15.04
## 2 1961     1   2 14.71 16.88 10.83  6.50 12.62 7.67 11.50 10.04  9.79  9.67 17.54 13.83
## 3 1961     1   3 18.50 16.88 12.33 10.13 11.17 6.17 11.25  8.04  8.50  7.67 12.75 12.71
</code></pre>

<pre><code class="r">tail(wind,3)
</code></pre>

<pre><code>##      Year month day   RPT   VAL   ROS  KIL   SHA   BIR   DUB   CLA   MUL   CLO   BEL   MAL
## 6572 1978    12  29 14.00 10.29 14.42 8.71  9.71 10.54 19.17 12.46 14.50 16.42 18.88 29.58
## 6573 1978    12  30 18.50 14.04 21.29 9.13 12.75  9.71 18.08 12.87 12.46 12.12 14.67 28.79
## 6574 1978    12  31 20.33 17.41 27.29 9.59 12.08 10.13 19.25 11.63 11.58 11.38 12.08 22.08
</code></pre>

<ul>
<li>Here is another way to add 1900 to the year column</li>
</ul>

<pre><code class="r">wind$Year &lt;- wind$Year + 1900
</code></pre>

<ul>
<li>INSERT: let&#39;s turn our data.frame into tbl_df using tibble package. This form
is sometimes easier as it abbreviates huge data.frames when it prints them</li>
</ul>

<pre><code class="r">## call tibble function as_tibble() this one time
wind &lt;- tibble::as_tibble(wind)
## look at the format
wind
</code></pre>

<pre><code>## # A tibble: 6,574 × 15
##     Year month   day   RPT   VAL   ROS   KIL   SHA   BIR   DUB   CLA   MUL   CLO   BEL   MAL
##    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1   1961     1     1 15.04 14.96 13.17  9.29 13.96  9.87 13.67 10.25 10.83 12.58 18.50 15.04
## 2   1961     1     2 14.71 16.88 10.83  6.50 12.62  7.67 11.50 10.04  9.79  9.67 17.54 13.83
## 3   1961     1     3 18.50 16.88 12.33 10.13 11.17  6.17 11.25  8.04  8.50  7.67 12.75 12.71
## 4   1961     1     4 10.58  6.63 11.75  4.58  4.54  2.88  8.63  1.79  5.83  5.88  5.46 10.88
## 5   1961     1     5 13.33 13.25 11.42  6.17 10.71  8.21 11.92  6.54 10.92 10.34 12.92 11.83
## 6   1961     1     6 13.21  8.12  9.96  6.67  5.37  4.50 10.67  4.42  7.17  7.50  8.12 13.17
## 7   1961     1     7 13.50 14.29  9.50  4.96 12.29  8.33  9.17  9.29  7.58  7.96 13.96 13.79
## 8   1961     1     8 10.96  9.75  7.62  5.91  9.62  7.29 14.29  7.62  9.25 10.46 16.62 16.46
## 9   1961     1     9 12.58 10.83 10.00  4.75 10.37  6.79  8.04 10.13  7.79  9.08 13.04 15.37
## 10  1961     1    10 13.37 11.12 19.50  8.33  9.71  6.54 11.42  7.79  8.54  9.00  8.58 11.83
## # ... with 6,564 more rows
</code></pre>

<ul>
<li>NOTE: tibble wraps data.frame to suppress printing of all rows and columns,
nice. If you want to see more rows or columns you can set defaults or print
with tbl_dif() wrapper inside the print() function</li>
</ul>

<pre><code class="r">## set width option to show all columns
options(tibble.width = Inf)

## set print_max and print_min to specify row print options
options(tibble.print_max = n, tibble.print_min = m)
options(tibble.print_max = Inf)

## print with tbl_df() wrapper and, 20 rows
print(tbl_df(wind_g), n=20)
</code></pre>

<ul>
<li>NEXT: combine the three date columns into one and give the values date class</li>
<li>There are many ways to do this. I use dplyr and lubridate here, apply
functions can also be used with as.Date()</li>
</ul>

<pre><code class="r">## with function applies pasted expression to data set wind, with &#39;-&#39; between values
## above feeds into ymd() as first argument, data to convert to ymd date
wind &lt;- dplyr::mutate(wind, Date = lubridate::ymd(with(wind, paste(Year, month, day, sep = &quot;-&quot;))))
</code></pre>

<ul>
<li>now we drop the columns we don&#39;t want: Year, month, day,</li>
</ul>

<pre><code class="r">## note select_() is for scripts and select() for command line

## with script we have to paste &quot;-&quot; sign onto  each colname string
wind &lt;- dplyr::select_(wind, .dots = paste(&quot;-&quot;, c(&quot;Year&quot;, &quot;month&quot;)))

## on command line, we can use -on_of() argument
wind &lt;- dplyr::select(wind, .dots = -one_of(c(&quot;day&quot;)))
</code></pre>

<pre><code class="r">## another way uses univariables to drop cols by position
wind &lt;- dplyr::select(wind, .dots = -(1,2,3))
</code></pre>

<ul>
<li>NEXT, gather  into the one variable into a column for stations, and a column
for wind speed. Keep the Date column. We will have Date, Station, and Wind
Speed as variables, and observations as rows. This is tidy data.</li>
</ul>

<pre><code class="r">## gather variables listed across columns using tidyr&#39;s gather function
wind &lt;- gather(wind, key = &quot;Station&quot;, value = &quot;Wind_Speed&quot;, -Date)

## have a look
head(wind)
</code></pre>

<pre><code>## # A tibble: 6 × 3
##         Date Station Wind_Speed
##       &lt;date&gt;   &lt;chr&gt;      &lt;dbl&gt;
## 1 1961-01-01     RPT      15.04
## 2 1961-01-02     RPT      14.71
## 3 1961-01-03     RPT      18.50
## 4 1961-01-04     RPT      10.58
## 5 1961-01-05     RPT      13.33
## 6 1961-01-06     RPT      13.21
</code></pre>

<pre><code class="r">str(wind)
</code></pre>

<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    78888 obs. of  3 variables:
##  $ Date      : Date, format: &quot;1961-01-01&quot; &quot;1961-01-02&quot; &quot;1961-01-03&quot; &quot;1961-01-04&quot; ...
##  $ Station   : chr  &quot;RPT&quot; &quot;RPT&quot; &quot;RPT&quot; &quot;RPT&quot; ...
##  $ Wind_Speed: num  15 14.7 18.5 10.6 13.3 ...
</code></pre>

<h3>STEP FIVE: GET SOME STATISTICS</h3>

<ul>
<li>average wind speed across all years and stations</li>
<li>average wind speed by station across all years</li>
</ul>

<pre><code class="r">## get some stats
## average windspeed across all years and stations
mean(wind$Wind_Speed)
</code></pre>

<pre><code>## [1] 10.22837
</code></pre>

<pre><code class="r">## average windspeed across all years for each station
wind %&gt;% group_by(Station) %&gt;% summarize( Mean = mean(Wind_Speed))
</code></pre>

<pre><code>## # A tibble: 12 × 2
##    Station      Mean
##      &lt;chr&gt;     &lt;dbl&gt;
## 1      BEL 13.121007
## 2      BIR  7.092254
## 3      CLA  8.494420
## 4      CLO  8.707268
## 5      DUB  9.796834
## 6      KIL  6.306275
## 7      MAL 15.599462
## 8      MUL  8.495818
## 9      ROS 11.660103
## 10     RPT 12.363715
## 11     SHA 10.456880
## 12     VAL 10.646448
</code></pre>

<ul>
<li>let&#39;s get average windspeed for each year across all stations&#39;</li>
<li>and average windspeed for each year for each station</li>
</ul>

<pre><code class="r">## display average wind speed across each year for all stations
wind %&gt;% mutate(years = lubridate::year(wind$Date)) %&gt;% group_by(years) %&gt;% summarize(Mean = mean(Wind_Speed))
</code></pre>

<pre><code>## # A tibble: 18 × 2
##    years      Mean
##    &lt;dbl&gt;     &lt;dbl&gt;
## 1   1961 10.328274
## 2   1962 10.346612
## 3   1963 11.071553
## 4   1964 10.631305
## 5   1965 10.551422
## 6   1966 11.021304
## 7   1967 10.974203
## 8   1968  9.751507
## 9   1969  9.496904
## 10  1970 10.385260
## 11  1971  9.146509
## 12  1972  9.818042
## 13  1973  9.557671
## 14  1974 10.865781
## 15  1975  9.543463
## 16  1976  9.486245
## 17  1977 10.783957
## 18  1978 10.354075
</code></pre>

<pre><code class="r">## display average wind speed across each year for all stations
wind_g &lt;- wind %&gt;% mutate(years = lubridate::year(wind$Date)) %&gt;% group_by(years,Station) %&gt;% summarize(Mean = mean(Wind_Speed))

## have a look
wind_g
</code></pre>

<pre><code>## Source: local data frame [216 x 3]
## Groups: years [?]
##
##    years Station      Mean
##    &lt;dbl&gt;   &lt;chr&gt;     &lt;dbl&gt;
## 1   1961     BEL 13.502795
## 2   1961     BIR  7.729726
## 3   1961     CLA  8.845397
## 4   1961     CLO  9.831342
## 5   1961     DUB  9.725288
## 6   1961     KIL  6.955288
## 7   1961     MAL 13.696411
## 8   1961     MUL  8.686521
## 9   1961     ROS 11.356384
## 10  1961     RPT 12.319233
## # ... with 206 more rows
</code></pre>

<pre><code class="r">## it&#39;s a tibble so to see more rows
nrow(wind_g)
</code></pre>

<pre><code>## [1] 216
</code></pre>

<pre><code class="r">print(tbl_df(wind_g), n=30)
</code></pre>

<pre><code>## # A tibble: 216 × 3
##    years Station      Mean
##    &lt;dbl&gt;   &lt;chr&gt;     &lt;dbl&gt;
## 1   1961     BEL 13.502795
## 2   1961     BIR  7.729726
## 3   1961     CLA  8.845397
## 4   1961     CLO  9.831342
## 5   1961     DUB  9.725288
## 6   1961     KIL  6.955288
## 7   1961     MAL 13.696411
## 8   1961     MUL  8.686521
## 9   1961     ROS 11.356384
## 10  1961     RPT 12.319233
## 11  1961     SHA 10.898274
## 12  1961     VAL 10.392630
## 13  1962     BEL 12.930685
## 14  1962     BIR  7.393068
## 15  1962     CLA  8.793753
## 16  1962     CLO  9.676247
## 17  1962     DUB 11.020712
## 18  1962     KIL  6.950959
## 19  1962     MAL 14.334466
## 20  1962     MUL  8.316822
## 21  1962     ROS 11.732712
## 22  1962     RPT 12.241562
## 23  1962     SHA 10.657918
## 24  1962     VAL 10.110438
## 25  1963     BEL 13.638877
## 26  1963     BIR  8.434712
## 27  1963     CLA 10.336548
## 28  1963     CLO 10.224438
## 29  1963     DUB 11.075699
## 30  1963     KIL  7.330055
## # ... with 186 more rows
</code></pre>

<ul>
<li>you can also look at each group by splitting wind_g by years</li>
</ul>

<pre><code class="r">## have a look at the first few groups
b &lt;- split(wind_g, wind_g$years)
## above splits them into a list where each element is a data.frame of group year
b[c(1,2)]
</code></pre>

<pre><code>## $`1961`
## Source: local data frame [12 x 3]
## Groups: years [1]
##
##    years Station      Mean
##    &lt;dbl&gt;   &lt;chr&gt;     &lt;dbl&gt;
## 1   1961     BEL 13.502795
## 2   1961     BIR  7.729726
## 3   1961     CLA  8.845397
## 4   1961     CLO  9.831342
## 5   1961     DUB  9.725288
## 6   1961     KIL  6.955288
## 7   1961     MAL 13.696411
## 8   1961     MUL  8.686521
## 9   1961     ROS 11.356384
## 10  1961     RPT 12.319233
## 11  1961     SHA 10.898274
## 12  1961     VAL 10.392630
##
## $`1962`
## Source: local data frame [12 x 3]
## Groups: years [1]
##
##    years Station      Mean
##    &lt;dbl&gt;   &lt;chr&gt;     &lt;dbl&gt;
## 1   1962     BEL 12.930685
## 2   1962     BIR  7.393068
## 3   1962     CLA  8.793753
## 4   1962     CLO  9.676247
## 5   1962     DUB 11.020712
## 6   1962     KIL  6.950959
## 7   1962     MAL 14.334466
## 8   1962     MUL  8.316822
## 9   1962     ROS 11.732712
## 10  1962     RPT 12.241562
## 11  1962     SHA 10.657918
## 12  1962     VAL 10.110438
</code></pre>

<ul>
<li>Let&#39;s save the entire workspace so we save the date, the urls, and various forms of
the data</li>
</ul>

<pre><code class="r">save.image(file = &quot;TUT_GET_TEXT_WSPACE.Rdate&quot;)
</code></pre>

<p>&ndash; To restore the workspace, type this:</p>

<pre><code class="r">load(&quot;TUT_GET_TEXT_WSPACE.Rdata&quot;)
</code></pre>

</body>

</html>
